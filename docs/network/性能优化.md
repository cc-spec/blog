---
title: 性能优化
date: 2022-05-04 20:08:43
permalink: /pages/5793f7/
categories:
  - network
tags:
  - 
---

> 问题：从输入URL到生成页面经历了什么？
> DNS获取IP地址，前端发起HTTP请求，后端返回数据，浏览器解析首页HTML，浏览器解析HTML，解析CSS，执行Vue，vue-router解析路由，加载对应组件
## 性能优化包括网络请求优化、代码效率优化、用户体验优化三大方面
### 一、网络请求优化
- dns预解析：通过dns-prefetch标签对首页资源进行预解析并缓存结果
- 文件打包（文件少）：获取网络文件需要发HTTP请求，HTTP请求通过TCP建立链接，每次都需要三次握手，会造成额外的网络损耗，所以需要减少文件的数目（HTTP2之前）
- 多路复用：HTTP2之后，HTTP2新增特性
- 文件压缩（文件小）：压缩js、css
- 按需加载：路由懒加载，访问的时候再去执行相关页面的代码
- 浏览器缓存：强缓存和协商缓存（Header：Expires、Cache-control、last-modify、ETag。。。）
### 二、代码效率优化
- computed优于watch
- 优先使用template激活vue内置的静态标记
- v-for一定要带key，利于diff算法高效复用标签
### 三、用户体验优化
- 加载大量图片：预加载图片的模糊版本，作为占位符，再去加载清晰的版本
- 上传大文件：断点续传
- 页面加载时间过长会造成白屏现象：页面没解析完之前，先渲染一个页面的骨架和loading的状态
